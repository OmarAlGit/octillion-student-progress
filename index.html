<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Group 1 — Student Assessments</title>
<style>
:root {
  --bg: #10161d;
  --panel: #1a212b;
  --firstcol: #cfd3d7;
  --header: #d4e6fa;
  --grid: #2b323a;
  --green: #42b972;
  --amber: #e39d2b;
  --red: #d15b4a;
}

body {
  background: var(--bg);
  color: #fff;
  font-family: "Inter", sans-serif;
  margin: 0;
  padding: 2rem;
  overflow-x: hidden;
}

h1 {
  text-align: center;
  margin-bottom: 1.5rem;
  font-size: 1.4rem;
}

.board {
  border: 1px solid var(--grid);
  background: var(--panel);
  border-radius: 14px;
  overflow-x: auto;
  overflow-y: visible;
  box-shadow: 0 20px 60px rgba(0,0,0,.35);
}

table {
  border-collapse: collapse;
  width: 100%;
  min-width: 1200px;
}

th, td {
  border: 1px solid var(--grid);
  padding: 0.5rem;
  text-align: center;
}

thead th {
  background: var(--header);
  color: #000;
  font-weight: 700;
  font-size: 1rem;
  padding: 1rem;
}

thead th small {
  display: block;
  font-size: 0.85rem;
  font-weight: 600;
}

tbody td:first-child {
  background: var(--firstcol);
  color: #0b0f13;
  font-weight: 800;
  text-align: center;
  position: sticky;
  left: 0;
  z-index: 4;
  vertical-align: middle;
  min-width: 240px;
  height: 110px;
  white-space: normal;
  line-height: 1.3;
  font-size: 18px;
  border-right: 1px solid var(--grid);
  border-bottom: 1px solid var(--grid);
}

.status {
  display: inline-block;
  border-radius: 16px;
  padding: 1rem;
  color: #fff;
  font-weight: 700;
  width: 180px;
  font-size: 0.9rem;
  line-height: 1.3;
}

.green { background: var(--green); }
.amber { background: var(--amber); }
.red { background: var(--red); }

.legend {
  display: flex;
  justify-content: center;
  gap: 2rem;
  margin-top: 1rem;
  font-size: 0.9rem;
}
.legend span {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.legend .dot {
  width: 20px;
  height: 20px;
  border-radius: 50%;
}
.legend .green { background: var(--green); }
.legend .amber { background: var(--amber); }
.legend .red { background: var(--red); }
</style>
</head>
<body>
  <h1>Group 1 — Student Assessments</h1>
  <div class="board">
    <table id="progressTable">
      <thead id="tableHead"></thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>
  <div class="legend">
    <span><div class="dot green"></div> Completed</span>
    <span><div class="dot amber"></div> In Progress</span>
    <span><div class="dot red"></div> Not Started</span>
  </div>

<script>
// ✅ Google Sheet CSV
const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRTW5UzVfnAcBJdW9fSL7SXFc0wtUV5ftFWKaFExTPhq7FTv5QZ0rHqjs4sLlBnFHzCi0ThHMzV3rT_/pub?gid=1926586971&single=true&output=csv";

async function loadData() {
  const res = await fetch(sheetUrl);
  const text = await res.text();
  const rows = text.trim().split("\n").map(r => r.split(","));
  
  const headerRow = ["Group 1", "H&S", "H&S 1", "H&S 2", "H&S 3", "H&S 4", "H&S 5", "H&S 6", "H&S 7"];
  const subheaders = ["", "Health & Safety Practices", "Identifying Hazards", "Manual Handling", "Manual Handling using lifting aids", "Ladders", "Standsteps", "Scaffold", "Safety Signs"];
  const students = ["Sadegh Zohrabbagi","Umar Majid","Saeed Fathi","Siavash Fathi","Ali Yaghout","Alex Abdulahad","Jibrill Mohamud","Ali Mohamed","Nigel Maraj","Nicolas Lennox"];
  
  // Table headers
  const thead = document.getElementById("tableHead");
  thead.innerHTML = `
    <tr>${headerRow.map((h, i) => `<th>${h}${subheaders[i] ? `<small>${subheaders[i]}</small>` : ""}</th>`).join("")}</tr>
  `;
  
  const tbody = document.getElementById("tableBody");
  tbody.innerHTML = students.map(name => `
    <tr>
      <td>${name}</td>
      ${headerRow.slice(1).map(() => {
        const status = Math.random(); // Mock for now
        if (status > 0.7) return `<td><div class="status green">Start: 06 Aug 2025<br>End: 11 Aug 2025</div></td>`;
        if (status > 0.4) return `<td><div class="status amber">Start: 07 Aug 2025<br>End: N/A</div></td>`;
        return `<td><div class="status red">Start: N/A<br>End: N/A</div></td>`;
      }).join("")}
    </tr>
  `).join("");
}

loadData();
</script>
</body>
</html>
